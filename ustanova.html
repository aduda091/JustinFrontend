<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <title>Justin Time- ustanova</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- JQuery-->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <!--custom css-->
    <link rel="stylesheet" type="text/css" href="css/JT.css">

    <!-- Vue.js -->
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
</head>
<body>
<div>

    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">JUSTIN TIME</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li class="active">
                    <li><a href="ustanova.html">Uzmi broj</a></li>
                    <li><a href="trenutni.html">Moj broj</a></li>

                    </ul>
                </li>

                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li><a href="us.html">O nama</a></li>
                    <li><a href="log.html">Log in</a></li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>

    <div id="popisUstanova">
        <h2> Odaberi ustanovu</h2>
        <ul class="list-group">
            <li class="list-group-item" v-for="ustanova in ustanove" >
                <a :href="'red.html?ustanova_id=' + ustanova.id" :title="ustanova.name" style="display: inline-block; width: 80%;font-size: 1.4em;">
                    {{ustanova.name}}
                </a>
                <a :href="'Ustanova_info.html?ustanova_id=' + ustanova.id"
                   :title="'Informacije o ustanovi ' + ustanova.name"
                   class="glyphicon glyphicon-info-sign pull-right"
                   style="display: inline-block; width: 40px;font-size: 1.4em;" >
                </a>
            </li>
        </ul>
    </div>

    <div class="progress">
        <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 20%">
            <span class="sr-only">20% Complete</span>
        </div>


</div>

</div>

<script>
    window.postaviUstanove = function (data) {
        console.log("Dohvacene ustanove: ");
        console.log(data);
        ustanove.ustanove = data;//postavi ustanove na dohvaćene podatke iz ajax requesta
    };
    var ustanove = new Vue({
        el: '#popisUstanova',
        data: {
            ustanove: [
                { name: 'MUP' },
                { name: 'HZZO' },
                { name: 'Zagrebačka banka' },
                { name: 'FINA'}
            ]
        }
    });



    //var url = 'http://duda-toshiba:8080/facility/read-all';
    var url = "http://localhost:3000/ustanove";
    $.ajax({
        method: "GET",
        contentType: 'application/json',
        //jsonp : true,
        dataType: "jsonp",
        //crossDomain : true,
        jsonpCallback: "postaviUstanove",
        cache: true,
        url: url
    }).done(function( data ) {
        //console.log("Funkcija done kaže:");
        //console.log(data);
    }).fail(function(jqxhr, textStatus, error) {
        console.log( textStatus + " " + error);
    });
//    $.getJSON(url, function (data, textStatus, jqxhr) {
////        var stavke = [];
////        for(var i=0;i<data.length;i++) {
////            stavke.push(data[i]);
////        }
////        ustanove.ustanove = stavke;
//        console.log(data);
//        console.log(textStatus);
//
//
//    })
//    .fail(function(jqxhr, textStatus, error) {
//        console.log( textStatus + " " + error);
//    })
//    .always(function() {
//
//    });



</script>
</body>
</html>