<head>
    <meta charset="UTF-8">
    <title>MUP</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- JQuery-->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <!--custom css-->
    <link rel="stylesheet" type="text/css" href="css/JT.css">

    <!-- Vue.js -->
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
</head>
<body >
<div class="container" id="ustanovaInfo">
<div id="navigacija"></div>

<div style="font-size: 3em;margin: 5px auto;"><span class="glyphicon glyphicon-info-sign" ></span><span style="margin-left: 10px"></span></div>

<h3>{{name}}</h3>
<h5><b>Adresa:</b> {{address}}</h5>
<h5><b>Telefon:</b><tel> {{telephone}}</tel></h5>
<h5><b>Email:</b> {{mail}}</h5>
<h5><b>Radno vrijeme:</b> {{hours}}</h5>
<div>
    <iframe :src="'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2827.844689574528!2d13.848334850051081!3d44.86545647899584!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x477cd3210b40b665%3A0x3b2510d29cdea0b3!2s' + addressUrl + '%2C+52100%2C+Pula!5e0!3m2!1shr!2shr!4v1478817260667'"  width="600" height="450" frameborder="0" style="border:0" allowfullscreen></iframe>
</div></div>
<script>

    function postaviUstanovu(data) {
        ustanovaInfo.name = data.name;
        ustanovaInfo.address = data.address;
        ustanovaInfo.telephone = data.telephone;
        ustanovaInfo.mail = data.mail;
    }
    $.urlParam = function(name){
        var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
        if (results==null){
            return null;
        }
        else{
            return results[1] || 0;
        }
    };

    var ustanovaInfo = new Vue({
       el: '#ustanovaInfo',
        data: {
            name : "MUP",
            address : "Trg Republike 1",
            telephone : "052 522 511",
            mail : "mup@hrvatska.hr",
            hours : "08-15"

        },
        computed: {
            addressUrl: function() {
                return this.address.replace(" ","+");
            }
        }
    });

    var url = 'https://justin-time.herokuapp.com/facility/';
    var idUstanove = $.urlParam('ustanova_id');//izvući iz adrese GET

    url += idUstanove;


    $.ajax({
        method: "GET",
        contentType: 'application/json',
        dataType: "json",
        cache: true,
        url: url
    }).done(function( data ) {
        console.log("Funkcija done kaže:");
        console.log(data);
        postaviUstanovu(data);
    }).fail(function(jqxhr, textStatus, error) {
        console.log( textStatus + " " + error);
    });

    $('#navigacija').load('navigacija.html');

</script>
</body>
</html>