<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Administracija - Justin Time</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- JQuery-->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <!--custom css-->
    <!--<link rel="stylesheet" type="text/css" href="css/JT.css">-->
    <!--admin-->
    <link rel="stylesheet" type="text/css" href="css/admin1.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <script src="https://use.fontawesome.com/75c0c19277.js"></script>

    <!-- Vue.js -->
    <script src="https://unpkg.com/vue/dist/vue.js"></script>

</head>

<body>

<div id="wrapper">

    <!-- Sidebar -->
    <div id="sidebar-wrapper">
        <ul class="sidebar-nav" style="font-size: 22px">
            <li class="sidebar-brand">
                <a href="#" style="font-size: 25px;color:#1ab7ea">
                    <b>MUP</b> - putovnice
                </a>
            </li>
            <!--<li> <a href="#menu-toggle" class="btn btn-default" id="menu-toggle">Toggle Menu</a></li>-->
            <li>
                <a href="admin1.html">Početna</a>
            </li>
            <li>
                <a href="admin_postavke.html">Postavke</a>
            </li>
            <li>
                <a href="support.html">Podrška</a>
            </li>
            <li>
                <a href="index.html">Log out</a>
            </li>
        </ul>
    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">
        <div class="container-fluid">
            <div class="row">

                <div class="container" id="aplikacija">
                    <div class="row" style="margin-left: 60px">

                        <div class="col-lg-2 col-sm-6">
                            <div class="circle-tile ">
                                <a href="#"><div class="circle-tile-heading green "@click="smanji"><i class="fa fa-arrow-left fa-fw fa-3x"></i></div></a>
                                <div class="circle-tile-content green">
                                    <div class="circle-tile-description text-faded"> Prethodni</div>
                                    <div class="circle-tile-number text-faded ">{{prethodni}}</div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-2 col-sm-6">
                            <div class="circle-tile ">
                                <a href="#"><div class="circle-tile-heading orange"><i class="fa fa-user fa-fw fa-3x"></i></div></a>
                                <div class="circle-tile-content orange">
                                    <div class="circle-tile-description text-faded"> Trenutno na redu</div>
                                    <div class="circle-tile-number text-faded ">{{trenutni}}</div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-2 col-sm-6">
                            <div class="circle-tile ">
                                <a href="#"><div class="circle-tile-heading red" @click="povecaj"><i class="fa fa-arrow-right fa-fw fa-3x"></i></div></a>
                                <div class="circle-tile-content red">
                                    <div class="circle-tile-description text-faded"> Sljedeći</div>
                                    <div class="circle-tile-number text-faded ">{{sljedeci}}</div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-2 col-sm-6">
                            <div class="circle-tile ">
                                <a href="#"><div class="circle-tile-heading purple"><i class="fa fa-pause fa-fw fa-3x"></i></div></a>
                                <div class="circle-tile-content purple">
                                    <div class="circle-tile-description text-faded"> Pauza</div>
                                    <div class="circle-tile-number text-faded ">15 min</div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-2 col-sm-6">
                            <div class="circle-tile ">
                                <a href="#"><div class="circle-tile-heading dark-blue"><i class="fa fa-power-off fa-fw fa-3x"></i></div></a>
                                <div class="circle-tile-content dark-blue">
                                    <div class="circle-tile-description text-faded"> Kraj rada</div>
                                    <div class="circle-tile-number text-faded ">*</div>
                                </div>
                            </div>
                        </div>
                    </div>


                        <div class="col-lg-6" style="margin-top: 60px; margin-left: 60px; font-size: 20px">
                            <table class="table table-hover">
                                <thead>
                                <tr>
                                    <th>Ime</th>
                                    <th>Broj</th>
                                    <th>Ukloni</th>
                                </tr>
                                </thead>

                                <tbody>
                                <template v-for="korisnik in ljudiURedu">
                                    <tr>
                                        <td>{{korisnik.firstName}} {{korisnik.lastName}}</td>
                                        <td>1</td>
                                        <td>
                                            <i class="fa fa-times" aria-hidden="true" style="font-size: 20px; color: #0a568c;" @click="ukloni(korisnik.mail)"></i>
                                        </td>
                                    </tr>
                                </template>

                                <!--<tr>-->
                                    <!--<td>Giacomo Guilizioni</td>-->
                                    <!--<td>1</td>-->
                                    <!--<td ><i class="fa fa-times" aria-hidden="true" style="font-size: 20px; color: #0a568c;"></i></td>-->

                                <!--</tr>-->
                                <!--<tr>-->
                                    <!--<td>Marco Botto</td>-->
                                    <!--<td>2</td>-->
                                    <!--<td style="font-size: 20px; color: #0a568c"><i class="fa fa-times" aria-hidden="true"></i></td>-->

                                <!--</tr>-->
                                <!--<tr>-->
                                    <!--<td>Mariah Maclachlan</td>-->
                                    <!--<td>3</td>-->
                                    <!--<td style="font-size: 20px; color: #0a568c"><i class="fa fa-times" aria-hidden="true"></i></td>-->

                                <!--</tr>-->
                                <!--<tr>-->
                                    <!--<td>Valerie Liberty</td>-->
                                    <!--<td>4</td>-->
                                    <!--<td style="font-size: 20px; color: #0a568c"><i class="fa fa-times" aria-hidden="true"></i></td>-->

                                <!--</tr>-->
                                <!--<tr>-->
                                    <!--<td>Guido Jack Guilizzoni</td>-->
                                    <!--<td>5</td>-->
                                    <!--<td style="font-size: 20px; color: #0a568c"><i class="fa fa-times" aria-hidden="true"></i></td>-->
                                <!--</tr>-->
                                </tbody>
                            </table></div>


                    <!--sat-->
                    <div  style="float:right; margin-right: 200px; margin-top: 200px">

                        <iframe src="http://free.timeanddate.com/clock/i5i5eu42/n2390/tlhr30/fn17/fs18/fcfff/tc000/ftb/pl5/pr5/pt5/pb5/tt0/tw0/td2/ts1/tb4" frameborder="0" width="192" height="54"></iframe>
                     </div>
                </div>
        </div>
            </div>


    </div>
    <!-- /#page-content-wrapper -->

</div>
<!-- /#wrapper -->



<!-- Menu Toggle Script -->
<script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });

    var admin = new Vue({
        el : "#aplikacija",
        data: {
            trenutni: 0, prethodni:0, sljedeci:1,
            idUstanove : "5829f97b21ad6507d041f480",//mup
            idReda : "5878cf40b3646416b86ba1ab", //mup - osobne iskaznice
            ljudiURedu : []
        },
        methods: {
            povecaj: function () {
                this.trenutni++;
            },
            smanji: function () {
                this.trenutni--;
            },
            ukloni: function (mail) {
                var app = this;
                var url = 'https://justin-time.herokuapp.com/queue/removeUser/';
                url+= this.idUstanove;
                url+="/" + this.idReda + "/" +mail;
                url += "?access_token=" + localStorage.getItem("token");
                $.ajax({
                    method: "DELETE",
                    contentType: 'application/json',
                    dataType: "json",
                    cache: true,
                    url: url,
                    data: {
                        //"access_token" : localStorage.getItem("token")
                    }
                }).done(function( data ) {
                    console.log(data);

                }).fail(function(jqxhr, textStatus, error) {
                    console.log( textStatus + " " + error);
                });
            }
        },
        watch: {
            trenutni: function() {
                if (this.trenutni<=0) {
                    this.prethodni=0;
                    this.trenutni=0;

                }
                else {
                    this.prethodni=this.trenutni-1;
                    this.sljedeci=this.trenutni+1;
                }
            }
        },
        created: function () {
            var app = this;
            var url = 'https://justin-time.herokuapp.com/queue/getAllUsers/' + this.idReda;
            $.ajax({
                method: "GET",
                contentType: 'application/json',
                dataType: "json",
                cache: true,
                url: url,
                data: {
                    "access_token" : localStorage.getItem("token")
                }
            }).done(function( data ) {
                console.log(data);
                for(var i=0;i<data.length;i++) {
                    app.ljudiURedu.push(data[i].user);
                }
            }).fail(function(jqxhr, textStatus, error) {
                console.log( textStatus + " " + error);
            });
        }
    })
</script>

</body>

</html>
